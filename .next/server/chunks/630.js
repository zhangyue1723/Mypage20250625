exports.id=630,exports.ids=[630],exports.modules={4128:(e,t,r)=>{"use strict";function a(e){throw Object.defineProperty(Error("cacheLife() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E627",enumerable:!1,configurable:!0})}Object.defineProperty(t,"F",{enumerable:!0,get:function(){return a}}),r(29294),r(63033)},19610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n},getSortedRoutes:function(){return a}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,a){if(0===e.length){this.placeholder=!1;return}if(a)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let n=e[0];if(n.startsWith("[")&&n.endsWith("]")){let r=n.slice(1,-1),o=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),o=!0),r.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(r.startsWith("...")&&(r=r.substring(3),a=!0),r.startsWith("[")||r.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(r.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function i(e,r){if(null!==e&&e!==r)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});t.forEach(e=>{if(e===r)throw Object.defineProperty(Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(e.replace(/\W/g,"")===n.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),t.push(r)}if(a)if(o){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});i(this.optionalRestSlugName,r),this.optionalRestSlugName=r,n="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});i(this.restSlugName,r),this.restSlugName=r,n="[...]"}else{if(o)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});i(this.slugName,r),this.slugName=r,n="[]"}}this.children.has(n)||this.children.set(n,new r),this.children.get(n)._insert(e.slice(1),t,a)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function a(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function n(e,t){let r={},n=[];for(let a=0;a<e.length;a++){let i=t(e[a]);r[i]=a,n[a]=i}return a(n).map(t=>e[r[t]])}},23496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return a.getSortedRouteObjects},getSortedRoutes:function(){return a.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});let a=r(19610),n=r(49022)},30826:(e,t,r)=>{"use strict";Object.defineProperty(t,"e",{enumerable:!0,get:function(){return u}});let a=r(46143),n=r(37719),i=r(29294),o=r(63033),s=r(43365),c=0;async function l(e,t,r,n,i,o,c){await t.set(r,{kind:s.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof i?a.CACHE_ONE_YEAR:i},{fetchCache:!0,tags:n,fetchIdx:o,fetchUrl:c})}function u(e,t,r={}){if(0===r.revalidate)throw Object.defineProperty(Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E57",enumerable:!1,configurable:!0});let a=r.tags?(0,n.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,n.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let d=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let n=i.workAsyncStorage.getStore(),u=o.workUnitAsyncStorage.getStore(),h=(null==n?void 0:n.incrementalCache)||globalThis.__incrementalCache;if(!h)throw Object.defineProperty(Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E469",enumerable:!1,configurable:!0});let p=u&&"prerender"===u.type?u.cacheSignal:null;p&&p.beginRead();try{let i=u&&"request"===u.type?u:void 0,p=(null==i?void 0:i.url.pathname)??(null==n?void 0:n.route)??"",f=new URLSearchParams((null==i?void 0:i.url.search)??""),y=[...f.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${f.get(e)}`).join("&"),m=`${d}-${JSON.stringify(t)}`,g=await h.generateCacheKey(m),b=`unstable_cache ${p}${y.length?"?":""}${y} ${e.name?` ${e.name}`:g}`,E=(n?n.nextFetchId:c)??1,S=null==u?void 0:u.implicitTags,_={type:"unstable-cache",phase:"render",implicitTags:S,draftMode:u&&n&&(0,o.getDraftModeProviderForCacheScope)(n,u)};if(n){if(n.nextFetchId=E+1,u&&("cache"===u.type||"prerender"===u.type||"prerender-ppr"===u.type||"prerender-legacy"===u.type)){"number"==typeof r.revalidate&&(u.revalidate<r.revalidate||(u.revalidate=r.revalidate));let e=u.tags;if(null===e)u.tags=a.slice();else for(let t of a)e.includes(t)||e.push(t)}if(!(u&&"unstable-cache"===u.type)&&"force-no-store"!==n.fetchCache&&!n.isOnDemandRevalidate&&!h.isOnDemandRevalidate&&!n.isDraftMode){let i=await h.get(g,{kind:s.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,softTags:null==S?void 0:S.tags,fetchIdx:E,fetchUrl:b});if(i&&i.value)if(i.value.kind!==s.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else{let s=void 0!==i.value.data.body?JSON.parse(i.value.data.body):void 0;return i.isStale&&(n.pendingRevalidates||(n.pendingRevalidates={}),n.pendingRevalidates[m]=o.workUnitAsyncStorage.run(_,e,...t).then(e=>l(e,h,g,a,r.revalidate,E,b)).catch(e=>console.error(`revalidating cache with key: ${m}`,e))),s}}let i=await o.workUnitAsyncStorage.run(_,e,...t);return n.isDraftMode||l(i,h,g,a,r.revalidate,E,b),i}{if(c+=1,!h.isOnDemandRevalidate){let e=await h.get(g,{kind:s.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,fetchIdx:E,fetchUrl:b,softTags:null==S?void 0:S.tags});if(e&&e.value){if(e.value.kind!==s.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else if(!e.isStale)return void 0!==e.value.data.body?JSON.parse(e.value.data.body):void 0}}let n=await o.workUnitAsyncStorage.run(_,e,...t);return l(n,h,g,a,r.revalidate,E,b),n}}finally{p&&p.endRead()}}}},35499:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function a(e){return e.startsWith("@")&&"@children"!==e}function n(e,t){if(e.includes(i)){let e=JSON.stringify(t);return"{}"!==e?i+"?"+e:i}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return o},PAGE_SEGMENT_KEY:function(){return i},addSearchParamsIfPageSegment:function(){return n},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return a}});let i="__PAGE__",o="__DEFAULT__"},49022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return o}});let a=r(71437),n=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,i=/\/\[[^/]+\](?=\/|$)/;function o(e,t){return(void 0===t&&(t=!0),(0,a.isInterceptionRouteAppPath)(e)&&(e=(0,a.extractInterceptionRouteInformation)(e).interceptedRoute),t)?i.test(e):n.test(e)}},62351:(e,t,r)=>{let a={unstable_cache:r(30826).e,revalidateTag:r(83518).revalidateTag,revalidatePath:r(83518).revalidatePath,unstable_expireTag:r(83518).unstable_expireTag,unstable_expirePath:r(83518).unstable_expirePath,unstable_noStore:r(68553).M,unstable_cacheLife:r(4128).F,unstable_cacheTag:r(72932).z};e.exports=a,t.unstable_cache=a.unstable_cache,t.revalidatePath=a.revalidatePath,t.revalidateTag=a.revalidateTag,t.unstable_expireTag=a.unstable_expireTag,t.unstable_expirePath=a.unstable_expirePath,t.unstable_noStore=a.unstable_noStore,t.unstable_cacheLife=a.unstable_cacheLife,t.unstable_cacheTag=a.unstable_cacheTag},68553:(e,t,r)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return o}});let a=r(29294),n=r(63033),i=r(84971);function o(){let e=a.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();if(e)!e.forceStatic&&(e.isUnstableNoStore=!0,t&&"prerender"===t.type||(0,i.markCurrentScopeAsDynamic)(e,t,"unstable_noStore()"))}},71437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return o},isInterceptionRouteAppPath:function(){return i}});let a=r(74722),n=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>n.find(t=>e.startsWith(t)))}function o(e){let t,r,i;for(let a of e.split("/"))if(r=n.find(e=>a.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":i="/"===t?"/"+i:t+"/"+i;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let o=t.split("/");if(o.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});i=o.slice(0,-2).concat(i).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:i}}},72932:(e,t,r)=>{"use strict";function a(...e){throw Object.defineProperty(Error("cacheTag() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E628",enumerable:!1,configurable:!0})}Object.defineProperty(t,"z",{enumerable:!0,get:function(){return a}}),r(63033),r(37719)},74722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return o}});let a=r(85531),n=r(35499);function i(e){return(0,a.ensureLeadingSlash)(e.split("/").reduce((e,t,r,a)=>!t||(0,n.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===a.length-1?e:e+"/"+t,""))}function o(e){return e.replace(/\.rsc($|\?)/,"$1")}},83518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return h},revalidateTag:function(){return l},unstable_expirePath:function(){return u},unstable_expireTag:function(){return d}});let a=r(84971),n=r(23496),i=r(46143),o=r(29294),s=r(63033),c=r(98479);function l(e){return p([e],`revalidateTag ${e}`)}function u(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: expirePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "expirePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`),p([r],`unstable_expirePath ${e}`)}function d(...e){return p(e,`unstable_expireTag ${e.join(", ")}`)}function h(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),p([r],`revalidatePath ${e}`)}function p(e,t){let r=o.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Object.defineProperty(Error(`Invariant: static generation store missing in ${t}`),"__NEXT_ERROR_CODE",{value:"E263",enumerable:!1,configurable:!0});let n=s.workUnitAsyncStorage.getStore();if(n){if("cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E181",enumerable:!1,configurable:!0});if("unstable-cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E306",enumerable:!1,configurable:!0});if("render"===n.phase)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E7",enumerable:!1,configurable:!0});if("prerender"===n.type){let e=Object.defineProperty(Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`),"__NEXT_ERROR_CODE",{value:"E406",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,n)}else if("prerender-ppr"===n.type)(0,a.postponeWithTracking)(r.route,t,n.dynamicTracking);else if("prerender-legacy"===n.type){n.revalidate=0;let e=Object.defineProperty(new c.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}for(let t of(r.pendingRevalidatedTags||(r.pendingRevalidatedTags=[]),e))r.pendingRevalidatedTags.includes(t)||r.pendingRevalidatedTags.push(t);r.pathWasRevalidated=!0}},85531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},87320:(e,t,r)=>{"use strict";let a;r.d(t,{V:()=>q});let n=new TextEncoder,i=new TextDecoder;function o(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:i.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=i.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),a=new Uint8Array(e.length);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);return a}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}class s extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class c extends s{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",a="unspecified"){super(e,{cause:{claim:r,reason:a,payload:t}}),this.claim=r,this.reason=a,this.payload=t}}class l extends s{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",a="unspecified"){super(e,{cause:{claim:r,reason:a,payload:t}}),this.claim=r,this.reason=a,this.payload=t}}class u extends s{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class d extends s{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class h extends s{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class p extends s{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class f extends s{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class y extends s{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}let m=(e,t)=>{let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new d(`alg ${e} is not supported either by JOSE or your javascript runtime`)}},g=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function b(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function E(e,t){return e.name===t}function S(e){return parseInt(e.name.slice(4),10)}function _(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let w=(e,...t)=>_("Key must be ",e,...t);function v(e,t,...r){return _(`Key for the ${e} algorithm must be `,t,...r)}let R=async(e,t,r)=>{if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(w(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return!function(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if(!E(e.algorithm,"HMAC"))throw b("HMAC");let r=parseInt(t.slice(2),10);if(S(e.algorithm.hash)!==r)throw b(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!E(e.algorithm,"RSASSA-PKCS1-v1_5"))throw b("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(S(e.algorithm.hash)!==r)throw b(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!E(e.algorithm,"RSA-PSS"))throw b("RSA-PSS");let r=parseInt(t.slice(2),10);if(S(e.algorithm.hash)!==r)throw b(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!E(e.algorithm,"Ed25519"))throw b("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!E(e.algorithm,"ECDSA"))throw b("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw b(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}var a=e,n=r;if(n&&!a.usages.includes(n))throw TypeError(`CryptoKey does not support this operation, its usages must include ${n}.`)}(t,e,r),t},O=async(e,t,r,a)=>{let n=await R(e,t,"verify");g(e,n);let i=m(e,n.algorithm);try{return await crypto.subtle.verify(i,n,r,a)}catch{return!1}},A=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},T=e=>{if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function P(e){return e?.[Symbol.toStringTag]==="CryptoKey"}function C(e){return e?.[Symbol.toStringTag]==="KeyObject"}let k=e=>P(e)||C(e);function N(e){return T(e)&&"string"==typeof e.kty}let W=e=>e?.[Symbol.toStringTag],D=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let a;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):a=r;break;case e.startsWith("PBES2"):a="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):a=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):a="wrapKey";break;case"decrypt"===r:a=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(a&&t.key_ops?.includes?.(a)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${a}" when present`)}return!0},K=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(N(t)){if(function(e){return"oct"===e.kty&&"string"==typeof e.k}(t)&&D(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!k(t))throw TypeError(v(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${W(t)} instances for symmetric algorithms must be of type "secret"`)}},$=(e,t,r)=>{if(N(t))switch(r){case"decrypt":case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&D(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&D(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!k(t))throw TypeError(v(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${W(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${W(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${W(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${W(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${W(t)} instances for asymmetric algorithm encryption must be of type "public"`)}},j=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?K(e,t,r):$(e,t,r)},I=(e,t,r,a,n)=>{let i;if(void 0!==n.crit&&a?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||void 0===a.crit)return new Set;if(!Array.isArray(a.crit)||0===a.crit.length||a.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(i=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,a.crit)){if(!i.has(o))throw new d(`Extension Header Parameter "${o}" is not recognized`);if(void 0===n[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&void 0===a[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(a.crit)},H=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)},x=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new d('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new d('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new d('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new d('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),a={...e};return delete a.alg,delete a.use,crypto.subtle.importKey("jwk",a,t,e.ext??!e.d,e.key_ops??r)},J=async(e,t,r,n=!1)=>{let i=(a||=new WeakMap).get(e);if(i?.[r])return i[r];let o=await x({...t,alg:r});return n&&Object.freeze(e),i?i[r]=o:a.set(e,{[r]:o}),o},M=(e,t)=>{let r,n=(a||=new WeakMap).get(e);if(n?.[t])return n[t];let i="public"===e.type,o=!!i;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,o,i?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,o,[i?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let a;switch(t){case"RSA-OAEP":a="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":a="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":a="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":a="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:a},o,i?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:a},o,[i?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let a=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!a)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===a&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:a},o,[i?"verify":"sign"])),"ES384"===t&&"P-384"===a&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:a},o,[i?"verify":"sign"])),"ES512"===t&&"P-521"===a&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:a},o,[i?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:a},o,i?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:a.set(e,{[t]:r}),r},L=async(e,t)=>{if(e instanceof Uint8Array||P(e))return e;if(C(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return M(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return J(e,r,t)}if(N(e))return e.k?o(e.k):J(e,e,t,!0);throw Error("unreachable")};async function U(e,t,r){let a,s;if(!T(e))throw new h("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new h('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new h("JWS Protected Header incorrect type");if(void 0===e.payload)throw new h("JWS Payload missing");if("string"!=typeof e.signature)throw new h("JWS Signature missing or incorrect type");if(void 0!==e.header&&!T(e.header))throw new h("JWS Unprotected Header incorrect type");let c={};if(e.protected)try{let t=o(e.protected);c=JSON.parse(i.decode(t))}catch{throw new h("JWS Protected Header is invalid")}if(!A(c,e.header))throw new h("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let l={...c,...e.header},d=I(h,new Map([["b64",!0]]),r?.crit,c,l),p=!0;if(d.has("b64")&&"boolean"!=typeof(p=c.b64))throw new h('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=l;if("string"!=typeof f||!f)throw new h('JWS "alg" (Algorithm) Header Parameter missing or invalid');let m=r&&H("algorithms",r.algorithms);if(m&&!m.has(f))throw new u('"alg" (Algorithm) Header Parameter value not allowed');if(p){if("string"!=typeof e.payload)throw new h("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new h("JWS Payload must be a string or an Uint8Array instance");let g=!1;"function"==typeof t&&(t=await t(c,e),g=!0),j(f,t,"verify");let b=function(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let a of e)t.set(a,r),r+=a.length;return t}(n.encode(e.protected??""),n.encode("."),"string"==typeof e.payload?n.encode(e.payload):e.payload);try{a=o(e.signature)}catch{throw new h("Failed to base64url decode the signature")}let E=await L(t,f);if(!await O(f,E,a,b))throw new y;if(p)try{s=o(e.payload)}catch{throw new h("Failed to base64url decode the payload")}else s="string"==typeof e.payload?n.encode(e.payload):e.payload;let S={payload:s};return(void 0!==e.protected&&(S.protectedHeader=c),void 0!==e.header&&(S.unprotectedHeader=e.header),g)?{...S,key:E}:S}async function X(e,t,r){if(e instanceof Uint8Array&&(e=i.decode(e)),"string"!=typeof e)throw new h("Compact JWS must be a string or Uint8Array");let{0:a,1:n,2:o,length:s}=e.split(".");if(3!==s)throw new h("Invalid Compact JWS");let c=await U({payload:n,protected:a,signature:o},t,r),l={payload:c.payload,protectedHeader:c.protectedHeader};return"function"==typeof t?{...l,key:c.key}:l}let F=e=>Math.floor(e.getTime()/1e3),G=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,B=e=>{let t,r=G.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let a=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(a);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*a);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*a);break;case"day":case"days":case"d":t=Math.round(86400*a);break;case"week":case"weeks":case"w":t=Math.round(604800*a);break;default:t=Math.round(0x1e187e0*a)}return"-"===r[1]||"ago"===r[4]?-t:t},Y=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,V=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));async function q(e,t,r){let a=await X(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new p("JWTs MUST NOT use unencoded payload");let n={payload:function(e,t,r={}){let a,n;try{a=JSON.parse(i.decode(t))}catch{}if(!T(a))throw new p("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||Y(e.typ)!==Y(o)))throw new c('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:s=[],issuer:u,subject:d,audience:h,maxTokenAge:f}=r,y=[...s];for(let e of(void 0!==f&&y.push("iat"),void 0!==h&&y.push("aud"),void 0!==d&&y.push("sub"),void 0!==u&&y.push("iss"),new Set(y.reverse())))if(!(e in a))throw new c(`missing required "${e}" claim`,a,e,"missing");if(u&&!(Array.isArray(u)?u:[u]).includes(a.iss))throw new c('unexpected "iss" claim value',a,"iss","check_failed");if(d&&a.sub!==d)throw new c('unexpected "sub" claim value',a,"sub","check_failed");if(h&&!V(a.aud,"string"==typeof h?[h]:h))throw new c('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":n=B(r.clockTolerance);break;case"number":n=r.clockTolerance;break;case"undefined":n=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:m}=r,g=F(m||new Date);if((void 0!==a.iat||f)&&"number"!=typeof a.iat)throw new c('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new c('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>g+n)throw new c('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new c('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=g-n)throw new l('"exp" claim timestamp check failed',a,"exp","check_failed")}if(f){let e=g-a.iat;if(e-n>("number"==typeof f?f:B(f)))throw new l('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-n)throw new c('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a}(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...n,key:a.key}:n}}};